@[TOC](目录)
# 迁移操作
## 原Redis dump文件
- 查看数据目录位置
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/8d88616b390e4b22ab2d2d1e4bcf4e03.png)

```shell
config get dir
```
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6bbf4c4d30e54414a65c20a6669e1c5c.png)


 -  保存一份最新数据到`rdb`文件
```shell
bgsave
或者
save
```

## 替换目标Redis dump
- 关闭目标Redis `AOF`,避免干扰
	- 查看有没有关闭AOF
	```shell
	CONFIG GET appendonly
	```
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/f1bce9949639401f8e7bf0ff0c809fff.png)

- 关闭目标Redis,替换`dump.rdb`文件
```shell
 systemctl stop redis-server
 cp dump.rdb /var/lib/redis
```
- 重启Redis
```shell
 systemctl start redis-server
```
- 可能报权限问题，取决于启动redis的配置，例如我的服务配置：
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/c576280c48534fd4b449afd8fe521624.png)
- 我遇到以下报错
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/333143835eb542848c481c5018b9eb38.png)
- 解决方案：

```shell
# 启动报权限问题，解决方案
chown redis:redis /var/lib/redis/dump.rdb 
```
# 验证
- 原Redis数据
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ba694b81b613451b9fb22afee0feabef.png)
- 目标Redis
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/62ab31ceb40b4abd8ca9dd3ff482c436.png)





# 参考
- [https://www.cnblogs.com/firespeed/p/18429613](https://www.cnblogs.com/firespeed/p/18429613)